<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Will You Be My Valentine?</title>
<style>
  :root{
    --bg1:#fff6fb; --bg2:#ffe8f3;
    --accent:#ff2d93; --accent-2:#ff6aa7;
    --muted:#ffe9f2; --text:#4a0033; --white:#fff;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter, "Segoe UI", Roboto, Arial, sans-serif;-webkit-font-smoothing:antialiased}
  body{
    background: linear-gradient(180deg,var(--bg1),var(--bg2));
    display:flex;align-items:center;justify-content:center; padding:20px;
    color:var(--text);
  }

  /* Stage: center container. Using aspect-ratio + responsive sizing */
  .stage{
    width:min(980px,96vw);
    max-width:980px;
    aspect-ratio:1/1;
    position:relative;
    border-radius:18px;
    display:flex;align-items:center;justify-content:center;
    background:
      radial-gradient(circle at 12% 18%, rgba(255,77,166,0.05), transparent 6%),
      radial-gradient(circle at 88% 85%, rgba(255,45,147,0.03), transparent 10%),
      linear-gradient(180deg, rgba(255,255,255,0.4), rgba(255,255,255,0.08));
    box-shadow: 0 30px 80px rgba(200,60,120,0.08);
    overflow:visible;
  }

  /* Main circle: size uses vmin to scale nicely on mobile */
  .circle {
    --circle-size:52vmin;                 /* base: responsive */
    width:var(--circle-size); height:var(--circle-size);
    border-radius:50%;
    background: linear-gradient(180deg,#fff,#fff7fb);
    border:6px solid rgba(255,45,147,0.12);
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    position:relative; z-index:3;
    transition: transform .25s ease;
  }

  .circle.heartbeat { animation: heartbeat 3s infinite; }
  @keyframes heartbeat {
    0% { transform: scale(1); } 35% { transform: scale(1.02); } 70% { transform: scale(1.01); } 100% { transform: scale(1); }
  }

  .prompt { color:var(--accent); font-weight:800; font-size: clamp(18px, 2.6vmin, 28px); text-align:center; margin:22px 18px 8px; }
  .sub { color:#b3216e; font-weight:600; font-size: clamp(12px,1.6vmin,16px); margin-bottom:12px; text-align:center; padding:0 18px }

  /* center controls */
  .center-row { display:flex; gap:12px; align-items:center; justify-content:center; pointer-events:auto; }
  .btn { border:none; cursor:pointer; font-weight:700; border-radius:28px; padding:12px 20px; color:var(--white); box-shadow: 0 10px 30px rgba(255,45,147,0.12); transition: transform .18s ease }
  .btn:active { transform: translateY(2px); }
  .btn-yes {
    background: linear-gradient(180deg,var(--accent),var(--accent-2));
    font-size: clamp(14px,1.8vmin,18px);
  }

  /* NO button - absolutely positioned by JS; slightly larger for touch */
  .btn-no {
    position:absolute;
    padding:10px 16px;
    border-radius:22px;
    background: linear-gradient(180deg,#ffd0ea,#ff8fc9);
    color:var(--white);
    font-weight:800;
    z-index:4;
    box-shadow: 0 8px 22px rgba(255,45,147,0.10);
    transition: left .35s cubic-bezier(.2,.9,.25,1), top .35s cubic-bezier(.2,.9,.25,1), transform .12s ease;
    font-size: clamp(13px,1.6vmin,15px);
    pointer-events:auto;
  }

  /* hearts wrap */
  .hearts-wrap { position:absolute; inset:0; z-index:2; pointer-events:none; }

  /* heart button */
  .heart-btn {
    position:absolute;
    width: min(9vmin,78px);
    height: min(9vmin,78px);
    background:transparent;border:none;padding:0;
    cursor:pointer; pointer-events:auto; display:grid;place-items:center;
    transform-origin:center center; transition: transform .18s ease;
    touch-action:manipulation;  /* improve tap responsiveness */
  }
  .heart-btn:focus { outline: 3px solid rgba(255,45,147,0.16); border-radius:10px; }
  .heart-btn:hover { transform: translateY(-6px) scale(1.06); }

  .heart-svg { width:78%; height:78%; display:block; filter: drop-shadow(0 8px 18px rgba(200,20,100,0.06)); }
  .heart-label {
    position:absolute;
    font-weight:800; font-size:12px; color:white; pointer-events:none;
    text-shadow:0 2px 6px rgba(0,0,0,0.12);
  }
  .heart-ring {
    position:absolute; width: calc(100% + 12px); height: calc(100% + 12px); left:-6px; top:-6px;
    border-radius:50%; border:3px solid rgba(255,45,147,0.10); pointer-events:none;
  }

  /* modal */
  .modal-wrap {
    position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:40;
    backdrop-filter: blur(6px) saturate(110%); background: linear-gradient(180deg, rgba(255,255,255,0.18), rgba(255,241,248,0.24));
    padding:18px;
  }
  .modal {
    background: linear-gradient(180deg,#fff,#fff7fb); width:min(760px,96vw); max-height:86vh; border-radius:14px; padding:22px;
    box-shadow: 0 40px 110px rgba(200,50,120,0.14); overflow:auto; border:1px solid rgba(255,45,147,0.06);
  }
  .modal h2{ color:var(--accent); margin:0 0 12px; font-size: clamp(18px,2.6vmin,26px) }
  .modal .content{ color:#4b0033; line-height:1.6; font-size:15px }
  .actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:12px }
  .btn-close { background: transparent; border:1px solid rgba(185,42,118,0.12); padding:8px 12px; border-radius:10px; color:#96315d; cursor:pointer }

  /* sparkle */
  .sparkle { position:absolute; width:8px; height:8px; background: radial-gradient(circle,#fff,#fff0); border-radius:50%; filter: blur(.8px); opacity:.9; pointer-events:none; animation:spark 6s linear infinite }
  @keyframes spark { 0%{transform:translateY(0) scale(1)} 50%{transform:translateY(-6px) scale(1.2)} 100%{transform:translateY(0) scale(1)} }

  /* Responsive tweaks for phones (iPhone-size etc.) */
  @media (max-width:720px) {
    .stage{ width:92vw; aspect-ratio: 9 / 18; /* taller canvas for phones */ }
    .circle { --circle-size:76vmin; }
    .heart-btn { width:min(12.6vmin,64px); height:min(12.6vmin,64px); }
    .modal{ padding:16px; width:min(94vw,560px) }
  }

  @media (max-width:420px) {
    .stage{ width:94vw; aspect-ratio: 9 / 19; }
    .circle { --circle-size:86vmin; }
    .heart-label{ display:none }
    .heart-btn { width:min(14.6vmin,58px); height:min(14.6vmin,58px); }
    .btn-no { font-size:13px; padding:8px 12px; }
    .modal{ width:94vw; max-height:92vh; border-radius:12px; padding:14px }
  }

  /* small accessibility improvements */
  @media (hover:none) {
    .heart-btn:hover{ transform:none } /* don't rely on hover on touch devices */
  }
</style>
</head>
<body>

<div class="stage" id="stage">
  <div class="sparkle" style="left:10%; top:12%; animation-duration:5.4s"></div>
  <div class="sparkle" style="left:78%; top:16%; animation-duration:7.1s"></div>

  <div class="circle" id="mainCircle" role="region" aria-label="Valentine circle">
    <div class="prompt">Will you be my Valentine?</div>
    <div class="sub">Pick a heart — each one hides a long love letter written just for you.</div>
    <div class="center-row">
      <button id="yesBtn" class="btn btn-yes" aria-label="Yes — open message">YES</button>
    </div>
  </div>

  <!-- NO button: positioned by JS on the circle edge -->
  <button id="noBtn" class="btn-no" aria-label="No — try to click me">NO</button>

  <!-- hearts container (buttons added by JS) -->
  <div class="hearts-wrap" id="heartsWrap" aria-hidden="false"></div>
</div>

<!-- modal -->
<div class="modal-wrap" id="modalWrap" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <h2 id="modalTitle">Love Letter</h2>
    <div class="content" id="modalContent"></div>
    <div class="actions">
      <button id="closeModal" class="btn-close">Close</button>
      <button id="loveAgain" class="btn btn-yes">Send Love</button>
    </div>
  </div>
</div>

<script>
/* -------------------- Data: 10 deep messages + yes message -------------------- */
const loveLetters = [
  `My love,<br><br>I only saw you once, but that moment has stayed with me longer than many people I see every day. Your face, your smile, the calm around you — it all felt different. I don’t know how one seeing could leave such a deep memory, but it did. Sometimes I wonder if you even know how special you are to someone who barely had a chance to know you. You became a quiet thought in my mind that never really left.`,
  `Darling,<br><br>You make the world kinder — one small smile, one thoughtful gesture, one patient ear at a time. I love how you make ordinary hours bright. Let us build a life of simple, and the comfort of knowing I am loved by you.`,
  `Beloved,<br><br>With you I have learned the meaning of stillness, of being seen, and of being held. Your presence turns the ordinary into something sacred. I vow to be your steady place, to celebrate your joys and to lift you when you feel small.`,
  `My forever,<br><br>It’s strange how someone you met only once can feel so familiar in your thoughts. I don’t know your favorite song or your favorite color, but I know the way you made me feel — calm, warm, and hopeful. That feeling is rare, and I’ve carried it quietly ever since.`,
  `Sweetheart,<br><br>I treasure you in the quiet hours. Your warmth, your patience, your honesty — these are gifts I will cherish always. I promise to nurture the tenderness between us and to keep choosing you, every day, for all our days to come.`,
  `My dearest,<br><br>When I look at you I see my best friend and my most treasured companion. You teach me to be braver and kinder. I promise to listen, to support your dreams, and to hold your heart as if it were my own.`,
  `My Angel,<br><br>Your laughter is a light in my life. You make me better without even trying. I want to be your calm and your courage, your laughter and your comfort. Let me love you gently and fiercely, always.`,
  `My heart,<br><br>I didn’t fall in love in a second, but I felt something peaceful when I saw you. It was like the world slowed down for a moment. Since then, I’ve wished for another chance just to see you again, even if it’s only to say hello properly this time.`,
  `Treasure,<br><br>I want to write our story in simple, meaningful pages: mornings held close, afternoons of quiet dreaming, nights that end in gratitude. You are the reason my days are brighter; thank you for being you.`,
  `My everything,<br><br>There are no perfect words for how deeply I feel for you. You are kindness, patience, warmth and joy in my life. I promise to celebrate you, protect our gentleness, and to love you more with every sunrise. Be my forever Valentine.`
];

const yesLetter = `<strong>Yes — A Promise</strong><br><br>I am overjoyed you chose 'Yes'. This is the beginning of shared mornings, quiet laughter, and a million ordinary moments made precious by being with you. I promise to be present, to listen, and to love you with an open, steady heart.`;

/* -------------------- Create heart buttons dynamically -------------------- */
const heartsWrap = document.getElementById('heartsWrap');
const HEARTS = 10;

for (let i = 0; i < HEARTS; i++) {
  const btn = document.createElement('button');
  btn.className = 'heart-btn';
  btn.dataset.index = i;
  btn.setAttribute('aria-label', `Love letter ${i+1}`);
  btn.innerHTML = `
    <svg class="heart-svg" viewBox="0 0 32 29" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <path d="M23.6 0C21.1 0 19 1.6 17.9 3.5 16.8 1.6 14.7 0 12.2 0 7.1 0 3.6 4.2 3.6 8.7c0 7.2 11.6 13.4 13.9 15.1.4.2 1 .2 1.4 0 2.3-1.7 13.9-7.9 13.9-15.1C28.4 4.2 24.9 0 23.6 0z" fill="url(#g${i})"/>
      <defs>
        <linearGradient id="g${i}" x1="0" x2="1">
          <stop offset="0%" stop-color="#ff8fc9"/>
          <stop offset="100%" stop-color="#ff2d93"/>
        </linearGradient>
      </defs>
    </svg>
    <div class="heart-label">${String.fromCharCode(65+i)}</div>
    <div class="heart-ring" aria-hidden="true"></div>
  `;
  // open modal on click or touch
  btn.addEventListener('click', () => openModal(`A Letter — ${String.fromCharCode(65+i)}`, loveLetters[i]));
  btn.addEventListener('touchstart', (e) => { e.preventDefault(); openModal(`A Letter — ${String.fromCharCode(65+i)}`, loveLetters[i]); }, {passive:false});
  btn.tabIndex = 0;
  heartsWrap.appendChild(btn);
}

/* -------------------- Position hearts around the circle (responsive) -------------------- */
function positionHearts() {
  const circle = document.getElementById('mainCircle');
  const stage = document.getElementById('stage');
  const circleRect = circle.getBoundingClientRect();
  const stageRect = stage.getBoundingClientRect();
  const centerX = circleRect.left + circleRect.width / 2 - stageRect.left;
  const centerY = circleRect.top + circleRect.height / 2 - stageRect.top;

  // radius: slightly outside circle, but on small screens use smaller multiplier
  const baseRadius = Math.max(circleRect.width, circleRect.height) / 2;
  // Use multiplier that decreases on small screens for tighter layout
  let multiplier = 0.98;
  const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
  if (vw < 420) multiplier = 0.78;
  else if (vw < 720) multiplier = 0.88;

  const radius = baseRadius * multiplier + Math.min(circleRect.width, circleRect.height) * 0.12;

  const btns = Array.from(document.querySelectorAll('.heart-btn'));
  btns.forEach((btn, idx) => {
    const angle = -90 + (360 / btns.length) * idx; // start on top
    const rad = angle * Math.PI / 180;
    const btnRect = btn.getBoundingClientRect();
    const left = centerX + Math.cos(rad) * radius - btnRect.width / 2;
    const top  = centerY + Math.sin(rad) * radius - btnRect.height / 2;
    btn.style.left = `${left}px`;
    btn.style.top  = `${top}px`;
  });

  // reposition NO button as well along default angle
  positionNoButton();
}

/* -------------------- NO button evasive logic -------------------- */
const noBtn = document.getElementById('noBtn');
let noAngle = 18; // degrees
let noAnimating = false;

function positionNoButton(angleDeg = noAngle) {
  const circle = document.getElementById('mainCircle');
  const stage = document.getElementById('stage');
  const circleRect = circle.getBoundingClientRect();
  const stageRect = stage.getBoundingClientRect();

  const centerX = circleRect.left + circleRect.width / 2 - stageRect.left;
  const centerY = circleRect.top + circleRect.height / 2 - stageRect.top;

  // radius slightly inside the hearts ring so NO hugs the circle border
  const baseRadius = Math.max(circleRect.width, circleRect.height) / 2;
  let rMul = 0.62;
  const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
  if (vw < 420) rMul = 0.56;
  else if (vw < 720) rMul = 0.60;
  const radius = baseRadius * rMul + Math.min(circleRect.width, circleRect.height) * 0.02;

  const rad = angleDeg * Math.PI / 180;
  const btnRect = noBtn.getBoundingClientRect();
  const left = centerX + Math.cos(rad) * radius - btnRect.width / 2;
  const top  = centerY + Math.sin(rad) * radius - btnRect.height / 2;

  noBtn.style.left = `${left}px`;
  noBtn.style.top  = `${top}px`;
  noAngle = angleDeg;
}

function evadeNo() {
  if (noAnimating) return;
  noAnimating = true;
  // pick a new angle at least 50 degrees away
  let candidate = noAngle;
  for (let i=0;i<12;i++) {
    const cand = Math.floor(Math.random()*360);
    const diff = Math.abs(((cand - noAngle + 540) % 360) - 180);
    if (diff > 50) { candidate = cand; break; }
  }
  // playful small transform
  noBtn.style.transform = 'translateY(-6px) scale(1.06)';
  setTimeout(()=> noBtn.style.transform = '', 260);
  positionNoButton(candidate);
  setTimeout(()=> { noAnimating = false; }, 380);
}

/* mouse and touch handlers */
noBtn.addEventListener('mouseenter', evadeNo);
noBtn.addEventListener('touchstart', (e)=> { e.preventDefault(); evadeNo(); }, {passive:false});
noBtn.addEventListener('click', (e) => { e.preventDefault(); evadeNo(); });

/* -------------------- Modal functions -------------------- */
const modalWrap = document.getElementById('modalWrap');
const modalTitle = document.getElementById('modalTitle');
const modalContent = document.getElementById('modalContent');
const closeModalBtn = document.getElementById('closeModal');
const loveAgainBtn = document.getElementById('loveAgain');

function openModal(title, html) {
  modalTitle.innerHTML = title;
  modalContent.innerHTML = `<div style="white-space:pre-wrap">${html}</div>`;
  modalWrap.style.display = 'flex';
  modalWrap.setAttribute('aria-hidden', 'false');
  closeModalBtn.focus();
}
function closeModal() {
  modalWrap.style.display = 'none';
  modalWrap.setAttribute('aria-hidden', 'true');
  document.getElementById('yesBtn').focus();
}
closeModalBtn.addEventListener('click', closeModal);
loveAgainBtn.addEventListener('click', () => {
  const message = modalContent.innerHTML;
  sendToWhatsApp(message);

  modalContent.innerHTML += `<p style="margin-top:12px;color:#99003b;font-weight:700">Sending you all my love again...</p>`;
  setTimeout(closeModal, 900);
});
modalWrap.addEventListener('click', (e) => { if (e.target === modalWrap) closeModal(); });
document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

/* hook YES button */
document.getElementById('yesBtn').addEventListener('click', () => openModal('Yes — A Promise', yesLetter));

/* -------------------- Resize / orientation handling -------------------- */
let resizeTimer = null;
function doLayout() {
  positionHearts();
}
window.addEventListener('load', () => {
  // delayed initial layout to let fonts render
  setTimeout(doLayout, 60);
});
window.addEventListener('resize', () => {
  clearTimeout(resizeTimer);
  resizeTimer = setTimeout(doLayout, 90);
});
window.addEventListener('orientationchange', () => {
  // slightly delay and then recalc
  setTimeout(doLayout, 140);
});

/* ensure layout is stable after a short while */
setTimeout(doLayout, 200);

/* small UX touch: gentle animation on load */
setTimeout(()=> {
  const c = document.getElementById('mainCircle');
  c.classList.add('heartbeat');
  setTimeout(()=> c.classList.remove('heartbeat'), 7500);
}, 400);

/* -------- WhatsApp Send Function -------- */
function sendToWhatsApp(message) {
  const phone = "2349018333500"; // your number
  const cleanText = message
      .replace(/<br>/g, "\n")
      .replace(/<[^>]*>?/gm, ""); // remove HTML tags

  const url = "https://wa.me/" + phone + "?text=" + encodeURIComponent(cleanText);
  window.open(url, "_blank");
}

</script>
</body>

</html>
